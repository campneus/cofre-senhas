<!-- views/credential-detail.ejs -->
<div class="page-header">
  <div>
    <h1 class="page-title">Detalhes da Credencial</h1>
    <p class="page-subtitle"><%= credential.system_name %></p>
  </div>
  <div style="display: flex; gap: 10px;">
    <a href="/credentials/edit/<%= credential.id %>" class="btn btn-info">
      <i class="fas fa-edit"></i> Editar
    </a>
    <form action="/credentials/<%= credential.id %>?_method=DELETE" method="POST" class="delete-form" style="display: inline;">
      <button type="submit" class="btn btn-danger">
        <i class="fas fa-trash"></i> Excluir
      </button>
    </form>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
      <div class="form-group">
        <label class="form-label">Sistema</label>
        <div style="padding: 10px; background: #f9f9f9; border-radius: 4px;">
          <%= credential.system_name %>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Categoria</label>
        <div style="padding: 10px; background: #f9f9f9; border-radius: 4px;">
          <%= credential.category_name %>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Localidade</label>
        <div style="padding: 10px; background: #f9f9f9; border-radius: 4px;">
          <%= credential.location_name || '-' %>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Usuário</label>
        <div style="padding: 10px; background: #f9f9f9; border-radius: 4px; display: flex; justify-content: space-between;">
          <span><%= credential.username %></span>
          <button class="copy-password" data-password="<%= credential.username %>" title="Copiar usuário" style="background: none; border: none; cursor: pointer;">
            <i class="fas fa-copy"></i>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Senha</label>
        <div style="padding: 10px; background: #f9f9f9; border-radius: 4px; display: flex; justify-content: space-between;">
          <span class="password-text">••••••••</span>
          <div>
            <button class="view-password" title="Visualizar senha" style="background: none; border: none; cursor: pointer; margin-right: 10px;">
              <i class="fas fa-eye"></i>
            </button>
            <button class="copy-password" data-password="<%= credential.password %>" title="Copiar senha" style="background: none; border: none; cursor: pointer;">
              <i class="fas fa-copy"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">URL</label>
        <div style="padding: 10px; background: #f9f9f9; border-radius: 4px;">
          <% if (credential.url) { %>
            <a href="<%= credential.url %>" target="_blank" rel="noopener noreferrer">
              <%= credential.url %>
            </a>
          <% } else { %>
            -
          <% } %>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Última Atualização</label>
        <div style="padding: 10px; background: #f9f9f9; border-radius: 4px;">
          <%= new Date(credential.last_updated).toLocaleString('pt-BR') %>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Observações</label>
      <div style="padding: 10px; background: #f9f9f9; border-radius: 4px; min-height: 100px;">
        <%= credential.notes || '-' %>
      </div>
    </div>

    <div style="margin-top: 20px;">
      <a href="/credentials" class="btn btn-info">
        <i class="fas fa-arrow-left"></i> Voltar
      </a>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const viewPasswordBtn = document.querySelector('.view-password');
    const passwordText = document.querySelector('.password-text');
    
    viewPasswordBtn.addEventListener('click', function() {
      if (passwordText.textContent === '••••••••') {
        passwordText.textContent = '<%= credential.password %>';
        this.innerHTML = '<i class="fas fa-eye-slash"></i>';
      } else {
        passwordText.textContent = '••••••••';
        this.innerHTML = '<i class="fas fa-eye"></i>';
      }
    });
  });
</script>